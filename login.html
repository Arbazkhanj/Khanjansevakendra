<!DOCTYPE html>
<html lang="hi">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Login - Khan Jan Seva Kendra</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    *{margin:0;padding:0;box-sizing:border-box;}
    
    body{
      margin:0;
      font-family:'Poppins', sans-serif;
      background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);
      min-height:100vh;
      color:#123;
    }
    
    /* EXACT Header from Screenshot */
    .main-header {
      position: sticky;
      top: 0;
      z-index: 1000;
      background: white;
      box-shadow: 0 2px 20px rgba(0,0,0,0.1);
      padding: 15px 40px;
    }

    .header-container {
      max-width: 1400px;
      margin: 0 auto;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    /* Logo Section with Animated Border */
    .logo-section {
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .logo-wrapper {
      position: relative;
      width: 70px;
      height: 70px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .logo-img {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      object-fit: cover;
      border: 3px solid #667eea;
      position: relative;
      z-index: 2;
    }

    .logo-border {
      position: absolute;
      top: 0;
      left: 0;
      width: 70px;
      height: 70px;
      border: 3px dashed #ff6b6b;
      border-radius: 50%;
      animation: rotate 10s linear infinite;
    }

    @keyframes rotate {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }

    .logo-text h1 {
      font-size: 32px;
      font-weight: 700;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      margin: 0;
      line-height: 1.2;
    }

    .logo-text p {
      font-size: 16px;
      color: #666;
      margin: 0;
      font-weight: 500;
    }

    /* Navigation - Exact from Screenshot */
    .main-nav {
      display: flex;
      gap: 15px;
      align-items: center;
    }

    .nav-item {
      display: flex;
      align-items: center;
      gap: 8px;
      text-decoration: none;
      color: #333;
      font-weight: 600;
      font-size: 15px;
      padding: 12px 20px;
      border-radius: 30px;
      transition: all 0.3s;
    }

    .nav-item:hover {
      color: #667eea;
      background: rgba(102, 126, 234, 0.1);
    }

    .nav-item.active {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white !important;
    }

    .nav-item i {
      font-size: 16px;
    }
    
    /* Loading Overlay */
    .loading-overlay{
      position:fixed;top:0;left:0;width:100%;height:100%;
      background:rgba(255,255,255,0.95);z-index:9999;
      display:none;flex-direction:column;justify-content:center;align-items:center;
    }
    .spinner{
      width:50px;height:50px;border:5px solid #f3f3f3;
      border-top:5px solid #667eea;border-radius:50%;
      animation:spin 1s linear infinite;
    }
    @keyframes spin{0%{transform:rotate(0deg);}100%{transform:rotate(360deg);}}
    
    /* Toast Notifications */
    .toast{
      position:fixed;top:20px;right:20px;padding:15px 25px;
      border-radius:8px;color:white;font-weight:600;z-index:10000;
      transform:translateX(400px);transition:transform 0.3s;max-width:350px;
    }
    .toast.show{transform:translateX(0);}
    .toast.success{background:#4caf50;}
    .toast.error{background:#f44336;}
    .toast.info{background:#2196f3;}
    
    /* Main Container */
    .container{max-width:450px;margin:40px auto;padding:20px;}
    
    /* Login Box */
    .login-box{
      background:white;padding:40px;border-radius:20px;
      box-shadow:0 20px 60px rgba(0,0,0,0.3);
      animation:slideUp 0.5s ease;
    }
    @keyframes slideUp{
      from{opacity:0;transform:translateY(30px);}
      to{opacity:1;transform:translateY(0);}
    }
    
    h1{text-align:center;color:#333;margin-bottom:10px;font-size:28px;}
    .subtitle{text-align:center;color:#666;margin-bottom:30px;font-size:14px;}
    
    /* Toggle Buttons */
    .login-toggle{
      display:flex;background:#f0f0f0;border-radius:12px;padding:4px;margin-bottom:30px;
    }
    .toggle-btn{
      flex:1;padding:12px;border:none;background:transparent;cursor:pointer;
      border-radius:8px;font-weight:600;transition:0.3s;color:#666;
      font-family: 'Poppins', sans-serif;
    }
    .toggle-btn.active{background:white;color:#667eea;box-shadow:0 2px 8px rgba(0,0,0,0.1);}
    
    /* Forms */
    .form-section{display:none;}
    .form-section.active{display:block;animation:fadeIn 0.3s;}
    @keyframes fadeIn{from{opacity:0;}to{opacity:1;}}
    
    .input-group{
      position:relative;margin-bottom:20px;
    }
    .input-group i{
      position:absolute;left:12px;top:50%;transform:translateY(-50%);
      color:#999;font-size:16px;
    }
    .input-group input{
      width:100%;padding:12px 12px 12px 40px;
      border:2px solid #e0e0e0;border-radius:8px;font-size:14px;
      transition:0.3s;font-family: 'Poppins', sans-serif;
    }
    .input-group input:focus{
      outline:none;border-color:#667eea;
    }
    .input-group .toggle-password{
      position:absolute;right:12px;top:50%;transform:translateY(-50%);
      cursor:pointer;color:#999;
    }
    
    /* Admin Badge */
    .admin-badge{
      background:linear-gradient(90deg,#f5576c,#f093fb);
      color:white;padding:8px 16px;border-radius:20px;
      font-size:12px;font-weight:700;text-align:center;margin-bottom:20px;
      display:inline-block;width:100%;
    }
    
    /* Buttons */
    .btn{
      width:100%;padding:14px;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);
      color:white;border:none;border-radius:8px;font-size:16px;font-weight:700;
      cursor:pointer;transition:0.3s;text-transform:uppercase;letter-spacing:1px;
      display:flex;align-items:center;justify-content:center;gap:10px;
      font-family: 'Poppins', sans-serif;
    }
    .btn:hover{transform:translateY(-2px);box-shadow:0 8px 20px rgba(102,126,234,0.4);}
    .btn:disabled{background:#ccc;cursor:not-allowed;transform:none;}
    
    /* Links */
    .links{
      display:flex;justify-content:space-between;margin-top:20px;
      font-size:14px;
    }
    .links a{color:#667eea;text-decoration:none;font-weight:600;}
    .links a:hover{text-decoration:underline;}
    
    /* Signup Link */
    .signup-link{
      text-align:center;margin-top:25px;padding-top:20px;
      border-top:1px solid #eee;
    }
    .signup-link p{color:#666;margin-bottom:10px;}
    .signup-link a{
      color:#f557c;font-weight:700;text-decoration:none;font-size:16px;
    }
    
    /* Error/Success Messages */
    .message{
      padding:12px;border-radius:6px;margin-bottom:20px;
      font-size:14px;display:none;
    }
    .error{background:#ffebee;color:#c62828;border:1px solid #ef9a9a;}
    .success{background:#e8f5e9;color:#2e7d32;border:1px solid #a5d6a7;}
    
    /* Dark Footer */
    .main-footer {
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
      color: white;
      padding: 60px 20px 20px;
      margin-top: 60px;
    }

    .footer-container {
      max-width: 1200px;
      margin: 0 auto;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 40px;
    }

    .footer-section h3 {
      color: #f5576c;
      margin-bottom: 20px;
      font-size: 1.3em;
      position: relative;
      padding-bottom: 10px;
    }

    .footer-section h3::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      width: 50px;
      height: 3px;
      background: linear-gradient(90deg, #f5576c, #f093fb);
      border-radius: 2px;
    }

    .footer-section p, .footer-section a {
      color: #ccc;
      text-decoration: none;
      line-height: 1.8;
      transition: all 0.3s;
    }

    .footer-section a:hover {
      color: #f5576c;
      padding-left: 5px;
    }

    .footer-section i {
      margin-right: 10px;
      color: #f5576c;
      width: 20px;
    }

    .social-links {
      display: flex;
      gap: 15px;
      margin-top: 20px;
    }

    .social-links a {
      width: 40px;
      height: 40px;
      background: rgba(255,255,255,0.1);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s;
    }

    .social-links a:hover {
      background: #f5576c;
      transform: translateY(-5px);
    }

    .footer-bottom {
      text-align: center;
      margin-top: 40px;
      padding-top: 20px;
      border-top: 1px solid rgba(255,255,255,0.1);
      color: #888;
    }

    .footer-bottom .heart {
      color: #f5576c;
      animation: heartbeat 1.5s infinite;
    }

    @keyframes heartbeat {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.2); }
    }
    
    /* Responsive */
    @media(max-width:768px){
      .main-header { padding: 15px 20px; }
      .main-nav { display: none; }
      .logo-text h1 { font-size: 24px; }
      .container{margin:20px;padding:10px;}
      .login-box{padding:25px;}
    }

    .mobile-menu-btn {
      display: none;
      background: none;
      border: none;
      font-size: 24px;
      color: #667eea;
      cursor: pointer;
    }

    @media (max-width: 768px) {
      .mobile-menu-btn { display: block; }
    }
  
    /* Online Tools Dropdown */
    .dropdown {
      position: relative;
      display: inline-block;
    }
    
    .dropdown-content {
      display: none;
      position: absolute;
      background: white;
      min-width: 250px;
      box-shadow: 0 8px 16px rgba(0,0,0,0.2);
      z-index: 1001;
      border-radius: 10px;
      top: 100%;
      margin-top: 10px;
      overflow: hidden;
    }
    
    .dropdown-content a {
      color: #333;
      padding: 12px 16px;
      text-decoration: none;
      display: flex;
      align-items: center;
      gap: 10px;
      transition: background 0.3s;
      font-size: 14px;
    }
    
    .dropdown-content a:hover {
      background: #f5f5f5;
      color: #667eea;
    }
    
    .dropdown-content a i {
      width: 20px;
      color: #667eea;
    }
    
    .dropdown:hover .dropdown-content {
      display: block;
    }
    
    .dropdown:hover .nav-item {
      background: rgba(102, 126, 234, 0.1);
    }
</style>
  <!-- Google AdSense -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8237131770094477" crossorigin="anonymous"></script>
</head>
<body>
  <!-- Loading Overlay -->
  <div class="loading-overlay" id="loadingOverlay">
    <div class="spinner"></div>
    <p style="margin-top:20px;color:#667eea;font-weight:600;">Please wait...</p>
  </div>

  <!-- Toast Container -->
  <div id="toastContainer"></div>

  <!-- EXACT Header from Screenshot -->
  <header class="main-header">
    <div class="header-container">
      <!-- Logo Section -->
      <div class="logo-section">
        <div class="logo-wrapper">
          <div class="logo-border"></div>
          <img src="shop.jpg" alt="Khan Jan Seva Kendra" class="logo-img">
        </div>
        <div class="logo-text">
          <h1>Khan Jan Seva Kendra</h1>
          <p>खान जन सेवा केंद्र</p>
        </div>
      </div>

      <!-- Navigation -->
      <nav class="main-nav">
        <a href="index.html" class="nav-item">
          <i class="fas fa-home"></i> Home
        </a>
        <a href="services.html" class="nav-item">
          <i class="fas fa-cogs"></i> Services
        </a>
        <a href="about.html" class="nav-item">
          <i class="fas fa-info-circle"></i> About
        </a>
        <a href="contact.html" class="nav-item">
          <i class="fas fa-envelope"></i> Contact
        </a>
        <div class="dropdown">
        <a href="#" class="nav-item">
          <i class="fas fa-tools"></i> Online Tools <i class="fas fa-chevron-down" style="font-size:10px;margin-left:3px;"></i>
        </a>
        <div class="dropdown-content">
          <a href="Photoresizer.html"><i class="fas fa-image"></i> Photo Resizer</a>
          <a href="image-to-pdf.html"><i class="fas fa-file-pdf"></i> Image to PDF</a>
          <a href="pdf-editor.html"><i class="fas fa-edit"></i> PDF Editor</a>
          <a href="pdf-compressor.html"><i class="fas fa-compress"></i> PDF Compressor</a>
          <a href="background-remover.html"><i class="fas fa-magic"></i> Background Remover</a>
          <a href="signature-bg-remover.html"><i class="fas fa-signature"></i> Signature BG Remover</a>
          <a href="photo-text-overlay.html"><i class="fas fa-font"></i> Text on Photo</a>
          <a href="age-calculator.html"><i class="fas fa-calculator"></i> Age Calculator</a>
        </div>
      </div>
      <a href="Latest job.html" class="nav-item">
          <i class="fas fa-briefcase"></i> Latest Job
        </a>
        <a href="login.html" class="nav-item active">
          <i class="fas fa-user"></i> Login
        </a>
      </nav>
      
      <button class="mobile-menu-btn" onclick="toggleMobileMenu()">
        <i class="fas fa-bars"></i>
      </button>
    </div>
  </header>

  <script>
    function toggleMobileMenu() {
      const nav = document.querySelector('.main-nav');
      nav.style.display = nav.style.display === 'flex' ? 'none' : 'flex';
      if(nav.style.display === 'flex') {
        nav.style.position = 'absolute';
        nav.style.top = '100px';
        nav.style.left = '0';
        nav.style.right = '0';
        nav.style.background = 'white';
        nav.style.flexDirection = 'column';
        nav.style.padding = '20px';
        nav.style.boxShadow = '0 10px 30px rgba(0,0,0,0.1)';
      }
    }
  </script>

  <!-- Main Content -->
  <div class="container">
    <div class="login-box">
      <h1><i class="fas fa-lock"></i> Secure Login</h1>
      <p class="subtitle">Khan Jan Seva Kendra - Admin & Customer Portal</p>
      
      <!-- Toggle Buttons -->
      <div class="login-toggle">
        <button class="toggle-btn active" onclick="switchLogin('customer')">
          <i class="fas fa-user"></i> Customer
        </button>
        <button class="toggle-btn" onclick="switchLogin('admin')">
          <i class="fas fa-shield-alt"></i> Admin
        </button>
      </div>
      
      <!-- Messages -->
      <div id="messageBox" class="message"></div>
      
      <!-- Customer Login Form -->
      <div id="customerLogin" class="form-section active">
        <form onsubmit="return loginCustomer(event)">
          <div class="input-group">
            <i class="fas fa-envelope"></i>
            <input type="email" id="custEmail" placeholder="Email Address" required>
          </div>
          <div class="input-group">
            <i class="fas fa-lock"></i>
            <input type="password" id="custPassword" placeholder="Password" required>
            <i class="fas fa-eye toggle-password" onclick="togglePassword('custPassword')"></i>
          </div>
          <div class="links">
            <label style="display:flex;align-items:center;gap:5px;cursor:pointer;">
              <input type="checkbox" id="rememberMe" style="width:auto;"> Remember me
            </label>
            <a href="#" onclick="showForgotPassword()">Forgot Password?</a>
          </div>
          <button type="submit" class="btn" id="custLoginBtn">
            <i class="fas fa-sign-in-alt"></i> Login
          </button>
        </form>
        
        <div class="signup-link">
          <p>New Customer?</p>
          <a href="#" onclick="showSignup()"><i class="fas fa-user-plus"></i> Create Account</a>
        </div>
      </div>
      
      <!-- Admin Login Form -->
      <div id="adminLogin" class="form-section">
        <div class="admin-badge">
          <i class="fas fa-crown"></i> ADMIN ACCESS ONLY
        </div>
        <form onsubmit="return loginAdmin(event)">
          <div class="input-group">
            <i class="fas fa-envelope"></i>
            <input type="email" id="adminEmail" placeholder="Admin Email" required>
          </div>
          <div class="input-group">
            <i class="fas fa-key"></i>
            <input type="password" id="adminPassword" placeholder="Password" required>
            <i class="fas fa-eye toggle-password" onclick="togglePassword('adminPassword')"></i>
          </div>
          <button type="submit" class="btn" id="adminLoginBtn">
            <i class="fas fa-shield-alt"></i> Admin Login
          </button>
        </form>
      </div>
    </div>
  </div>

  <!-- Signup Modal -->
  <div id="signupModal" style="display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.8);z-index:2000;overflow-y:auto;">
    <div style="max-width:500px;margin:50px auto;background:white;padding:40px;border-radius:16px;position:relative;">
      <button onclick="closeSignup()" style="position:absolute;top:15px;right:15px;background:none;border:none;font-size:24px;cursor:pointer;color:#666;">
        <i class="fas fa-times"></i>
      </button>
      <h2 style="text-align:center;color:#333;margin-bottom:10px;"><i class="fas fa-user-plus"></i> Customer Registration</h2>
      <p style="text-align:center;color:#666;margin-bottom:30px;">Join Khan Jan Seva Kendra</p>
      
      <form onsubmit="return registerCustomer(event)">
        <div style="display:grid;grid-template-columns:1fr 1fr;gap:15px;">
          <div class="input-group">
            <i class="fas fa-user"></i>
            <input type="text" id="regName" placeholder="Full Name" required>
          </div>
          <div class="input-group">
            <i class="fas fa-phone"></i>
            <input type="tel" id="regMobile" placeholder="Mobile Number" pattern="[0-9]{10}" required>
          </div>
        </div>
        <div class="input-group">
          <i class="fas fa-envelope"></i>
          <input type="email" id="regEmail" placeholder="Email Address" required>
        </div>
        <div class="input-group">
          <i class="fas fa-lock"></i>
          <input type="password" id="regPassword" placeholder="Create Password" minlength="6" required>
        </div>
        <div class="input-group">
          <i class="fas fa-check-circle"></i>
          <input type="password" id="regConfirmPass" placeholder="Confirm Password" required>
        </div>
        <button type="submit" class="btn" id="regBtn">
          <i class="fas fa-user-check"></i> Register Now
        </button>
      </form>
      <p style="text-align:center;margin-top:20px;color:#666;font-size:14px;">
        Already have an account? <a href="#" onclick="closeSignup()" style="color:#667eea;font-weight:600;">Login here</a>
      </p>
    </div>
  </div>

  <!-- Dark Footer -->
  <footer class="main-footer">
    <div class="footer-container">
      <div class="footer-section">
        <h3><i class="fas fa-info-circle"></i> About Us</h3>
        <p>Khan Jan Seva Kendra - आपका विश्वसनीय सेवा केंद्र। 2018 से हम बस्ती, उत्तर प्रदेश में 100+ सरकारी और डिजिटल सेवाएं प्रदान कर रहे हैं।</p>
        <div class="social-links">
          <a href="#"><i class="fab fa-facebook-f"></i></a>
          <a href="#"><i class="fab fa-twitter"></i></a>
          <a href="#"><i class="fab fa-instagram"></i></a>
          <a href="#"><i class="fab fa-whatsapp"></i></a>
        </div>
      </div>
      
      <div class="footer-section">
        <h3><i class="fas fa-link"></i> Quick Links</h3>
        <p><a href="index.html"><i class="fas fa-home"></i> Home</a></p>
        <p><a href="services.html"><i class="fas fa-cogs"></i> Our Services</a></p>
        <p><a href="about.html"><i class="fas fa-users"></i> About Us</a></p>
        <p><a href="contact.html"><i class="fas fa-phone"></i> Contact</a></p>
        <p><div class="dropdown">
        <a href="#" class="nav-item">
          <i class="fas fa-tools"></i> Online Tools <i class="fas fa-chevron-down" style="font-size:10px;margin-left:3px;"></i>
        </a>
        <div class="dropdown-content">
          <a href="Photoresizer.html"><i class="fas fa-image"></i> Photo Resizer</a>
          <a href="image-to-pdf.html"><i class="fas fa-file-pdf"></i> Image to PDF</a>
          <a href="pdf-editor.html"><i class="fas fa-edit"></i> PDF Editor</a>
          <a href="pdf-compressor.html"><i class="fas fa-compress"></i> PDF Compressor</a>
          <a href="background-remover.html"><i class="fas fa-magic"></i> Background Remover</a>
          <a href="signature-bg-remover.html"><i class="fas fa-signature"></i> Signature BG Remover</a>
          <a href="photo-text-overlay.html"><i class="fas fa-font"></i> Text on Photo</a>
          <a href="age-calculator.html"><i class="fas fa-calculator"></i> Age Calculator</a>
        </div>
      </div>
      <a href="Latest job.html"><i class="fas fa-briefcase"></i> Latest Jobs</a></p>
      </div>
      
      <div class="footer-section">
        <h3><i class="fas fa-headset"></i> Contact Info</h3>
        <p><i class="fas fa-map-marker-alt"></i> District Hospital Gate No. 3, Basti, UP - 272002</p>
        <p><i class="fas fa-phone"></i> +91-7459064328</p>
        <p><i class="fas fa-envelope"></i> alerts@khanjansevakendra.shop</p>
        <p><i class="fas fa-clock"></i> Mon-Sat: 9:00 AM - 6:00 PM</p>
      </div>
      
      <div class="footer-section">
        <h3><i class="fas fa-shield-alt"></i> Trust & Security</h3>
        <p><i class="fas fa-check-circle"></i> 100% Secure Services</p>
        <p><i class="fas fa-certificate"></i> Government Authorized</p>
        <p><i class="fas fa-award"></i> 7+ Years Experience</p>
        <p><i class="fas fa-smile"></i> 50,000+ Happy Customers</p>
      </div>
    </div>
    
    <div class="footer-bottom">
      <p>© 2025 Khan Jan Seva Kendra. Made with Arbaz Khan  <span class="heart">❤️</span> in Basti, UP | 2018 से आपकी सेवा में</p>
    </div>
  </footer>

  <!-- Firebase SDK - UNCHANGED -->
  <script type="module">
    // Firebase Configuration - DO NOT MODIFY
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { 
      getAuth, 
      signInWithEmailAndPassword, 
      createUserWithEmailAndPassword,
      signOut,
      onAuthStateChanged,
      updateProfile,
      sendPasswordResetEmail
    } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
    import { 
      getDatabase, 
      ref, 
      set, 
      get, 
      child,
      update 
    } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

    const firebaseConfig = {
      apiKey: "AIzaSyACbkpT74plbA6REQnbF1775ZbwbnhJemk",
      authDomain: "khan-jan-seva-kendra-ac2f2.firebaseapp.com",
      databaseURL: "https://khan-jan-seva-kendra-ac2f2-default-rtdb.asia-southeast1.firebasedatabase.app",
      projectId: "khan-jan-seva-kendra-ac2f2",
      storageBucket: "khan-jan-seva-kendra-ac2f2.firebasestorage.app",
      messagingSenderId: "894379656916",
      appId: "1:894379656916:web:a45feb916031b5a3afdd41",
      measurementId: "G-6EKFZXQFCS"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const database = getDatabase(app);

    // Global Variables
    let currentMode = 'customer';

    // Toast Notification
    window.showToast = function(message, type = 'info') {
      const container = document.getElementById('toastContainer');
      const toast = document.createElement('div');
      toast.className = `toast ${type}`;
      toast.innerHTML = `<i class="fas ${type === 'success' ? 'fa-check-circle' : type === 'error' ? 'fa-exclamation-circle' : 'fa-info-circle'}"></i> ${message}`;
      container.appendChild(toast);
      setTimeout(() => toast.classList.add('show'), 10);
      setTimeout(() => {
        toast.classList.remove('show');
        setTimeout(() => toast.remove(), 300);
      }, 5000);
    };

    // Show/Hide Loading
    window.showLoading = function(show) {
      document.getElementById('loadingOverlay').style.display = show ? 'flex' : 'none';
    };

    // Show Message
    window.showMessage = function(text, type) {
      const box = document.getElementById('messageBox');
      box.textContent = text;
      box.className = 'message ' + type;
      box.style.display = 'block';
      setTimeout(() => box.style.display = 'none', 5000);
    };

    // Switch Login Type
    window.switchLogin = function(type) {
      currentMode = type;
      document.querySelectorAll('.toggle-btn').forEach(btn => btn.classList.remove('active'));
      document.querySelectorAll('.form-section').forEach(form => form.classList.remove('active'));
      
      if(type === 'admin') {
        document.querySelectorAll('.toggle-btn')[1].classList.add('active');
        document.getElementById('adminLogin').classList.add('active');
      } else {
        document.querySelectorAll('.toggle-btn')[0].classList.add('active');
        document.getElementById('customerLogin').classList.add('active');
      }
    };

    // Toggle Password
    window.togglePassword = function(fieldId) {
      const field = document.getElementById(fieldId);
      field.type = field.type === 'password' ? 'text' : 'password';
    };

    // Customer Login
    window.loginCustomer = async function(e) {
      e.preventDefault();
      const email = document.getElementById('custEmail').value;
      const password = document.getElementById('custPassword').value;
      const btn = document.getElementById('custLoginBtn');
      
      btn.disabled = true;
      btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Logging in...';
      showLoading(true);
      
      try {
        const userCredential = await signInWithEmailAndPassword(auth, email, password);
        const user = userCredential.user;
        
        const userRef = ref(database, `users/${user.uid}`);
        const snapshot = await get(userRef);
        
        if(snapshot.exists()) {
          const userData = snapshot.val();
          
          if(userData.role !== 'customer') {
            showToast('This account is not registered as customer!', 'error');
            await signOut(auth);
            btn.disabled = false;
            btn.innerHTML = '<i class="fas fa-sign-in-alt"></i> Login';
            showLoading(false);
            return false;
          }
          
          showToast(`Welcome back, ${userData.name}!`, 'success');
          
          setTimeout(() => {
            window.location.href = 'customer/dashboard.html';  // ✅ FIXED PATH
          }, 1500);
        } else {
          showToast('User data not found!', 'error');
        }
      } catch (error) {
        console.error('Login error:', error);
        let errorMsg = 'Login failed!';
        if(error.code === 'auth/user-not-found') errorMsg = 'Email not registered!';
        else if(error.code === 'auth/wrong-password') errorMsg = 'Wrong password!';
        else if(error.code === 'auth/invalid-email') errorMsg = 'Invalid email!';
        else errorMsg = error.message;
        
        showToast(errorMsg, 'error');
        btn.disabled = false;
        btn.innerHTML = '<i class="fas fa-sign-in-alt"></i> Login';
      }
      
      showLoading(false);
      return false;
    };

    // Admin Login
    window.loginAdmin = async function(e) {
      e.preventDefault();
      const email = document.getElementById('adminEmail').value;
      const password = document.getElementById('adminPassword').value;
      const btn = document.getElementById('adminLoginBtn');
      
      btn.disabled = true;
      btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Verifying...';
      showLoading(true);
      
      try {
        const userCredential = await signInWithEmailAndPassword(auth, email, password);
        const user = userCredential.user;
        
        const userRef = ref(database, `users/${user.uid}`);
        const snapshot = await get(userRef);
        
        if(snapshot.exists()) {
          const userData = snapshot.val();
          
          if(userData.role !== 'admin') {
            showToast('Access denied! Not an admin account.', 'error');
            await signOut(auth);
            btn.disabled = false;
            btn.innerHTML = '<i class="fas fa-shield-alt"></i> Admin Login';
            showLoading(false);
            return false;
          }
          
          showToast('Admin login successful!', 'success');
          
          setTimeout(() => {
            window.location.href = 'admin/dashboard.html';  // ✅ FIXED PATH
          }, 1500);
        } else {
          showToast('Admin data not found!', 'error');
        }
      } catch (error) {
        console.error('Admin login error:', error);
        let errorMsg = 'Login failed!';
        if(error.code === 'auth/user-not-found') errorMsg = 'Admin email not found!';
        else if(error.code === 'auth/wrong-password') errorMsg = 'Wrong password!';
        else errorMsg = error.message;
        
        showToast(errorMsg, 'error');
        btn.disabled = false;
        btn.innerHTML = '<i class="fas fa-shield-alt"></i> Admin Login';
      }
      
      showLoading(false);
      return false;
    };

    // Show Signup Modal
    window.showSignup = function() {
      document.getElementById('signupModal').style.display = 'block';
      document.body.style.overflow = 'hidden';
    };

    window.closeSignup = function() {
      document.getElementById('signupModal').style.display = 'none';
      document.body.style.overflow = 'auto';
    };

    // Register Customer
    window.registerCustomer = async function(e) {
      e.preventDefault();
      
      const name = document.getElementById('regName').value;
      const mobile = document.getElementById('regMobile').value;
      const email = document.getElementById('regEmail').value;
      const password = document.getElementById('regPassword').value;
      const confirmPass = document.getElementById('regConfirmPass').value;
      const btn = document.getElementById('regBtn');
      
      if(password !== confirmPass) {
        showToast('Passwords do not match!', 'error');
        return false;
      }
      
      if(password.length < 6) {
        showToast('Password must be at least 6 characters!', 'error');
        return false;
      }
      
      btn.disabled = true;
      btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Creating Account...';
      showLoading(true);
      
      try {
        const userCredential = await createUserWithEmailAndPassword(auth, email, password);
        const user = userCredential.user;
        
        await updateProfile(user, { displayName: name });
        
        await set(ref(database, `users/${user.uid}`), {
          name: name,
          email: email,
          mobile: mobile,
          role: 'customer',
          createdAt: Date.now(),
          updatedAt: Date.now()
        });
        
        showToast('Registration successful! Please login.', 'success');
        closeSignup();
        
        document.getElementById('custEmail').value = email;
        document.getElementById('custPassword').value = '';
        
        switchLogin('customer');
        
      } catch (error) {
        console.error('Registration error:', error);
        let errorMsg = 'Registration failed!';
        if(error.code === 'auth/email-already-in-use') errorMsg = 'Email already registered!';
        else if(error.code === 'auth/invalid-email') errorMsg = 'Invalid email!';
        else if(error.code === 'auth/weak-password') errorMsg = 'Password too weak!';
        else errorMsg = error.message;
        
        showToast(errorMsg, 'error');
      }
      
      btn.disabled = false;
      btn.innerHTML = '<i class="fas fa-user-check"></i> Register Now';
      showLoading(false);
      return false;
    };

    // Forgot Password
    window.showForgotPassword = async function() {
      const email = prompt('Enter your registered email address:');
      if(email) {
        try {
          await sendPasswordResetEmail(auth, email);
          showToast('Password reset email sent! Check your inbox.', 'success');
        } catch (error) {
          showToast('Failed to send reset email: ' + error.message, 'error');
        }
      }
    };

    // Check if already logged in
    onAuthStateChanged(auth, async (user) => {
      if (user) {
        const userRef = ref(database, `users/${user.uid}`);
        const snapshot = await get(userRef);
        
        if(snapshot.exists()) {
          const userData = snapshot.val();
          
          if(userData.role === 'admin') {
            window.location.href = 'admin/dashboard.html';  // ✅ FIXED PATH
          } else {
            window.location.href = 'customer/dashboard.html';  // ✅ FIXED PATH
          }
        }
      }
    });

    // Close modal on outside click
    window.onclick = function(event) {
      const modal = document.getElementById('signupModal');
      if(event.target === modal) {
        closeSignup();
      }
    };
  </script>

<!-- AdSense Ad Unit -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-8237131770094477"
     data-ad-slot="1234567890"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

</body>
</html>
